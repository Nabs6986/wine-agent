{% extends "base.html" %}

{% block title %}Inbox - Wine Agent{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Inbox</h1>
    <a href="/inbox/new" class="btn btn-primary">New Note</a>
</div>

<div class="filters">
    <a href="/inbox?filter=open" class="filter-btn {% if current_filter == 'open' %}active{% endif %}">Open</a>
    <a href="/inbox?filter=converted" class="filter-btn {% if current_filter == 'converted' %}active{% endif %}">Converted</a>
    <a href="/inbox?filter=all" class="filter-btn {% if current_filter == 'all' %}active{% endif %}">All</a>
</div>

{% if items %}
<div class="inbox-list">
    {% for item in items %}
    <div class="inbox-item {% if item.converted %}converted{% endif %}">
        <a href="/inbox/{{ item.id }}">
            <div class="item-preview">
                {{ item.raw_text[:150] }}{% if item.raw_text|length > 150 %}...{% endif %}
            </div>
            <div class="item-meta">
                <span class="date">{{ item.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                {% if item.tags %}
                <span class="tags">
                    {% for tag in item.tags %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </span>
                {% endif %}
                {% if item.converted %}
                <span class="status converted">Converted</span>
                {% else %}
                <span class="status open">Open</span>
                {% endif %}
            </div>
        </a>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>No inbox items found.</p>
    <a href="/inbox/new" class="btn btn-primary">Create your first note</a>
</div>
{% endif %}
{% endblock %}
